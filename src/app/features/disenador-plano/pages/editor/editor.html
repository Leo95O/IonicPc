<ion-content [scrollY]="false">
  <div class="editor-layout">
    
    <div class="toolbar-side">
      <div class="tool-group">
        <span class="group-title">Estructura</span>
        <button (click)="setModo('pared')" [class.active]="modo() === 'pared'" class="tool-btn" title="Dibujar Paredes">
          <fa-icon [icon]="['fas', 'pen-ruler']"></fa-icon>
          <span>Pared</span>
        </button>
        <button (click)="setModo('select')" [class.active]="modo() === 'select'" class="tool-btn" title="Seleccionar / Mover">
          <fa-icon [icon]="['fas', 'arrow-pointer']"></fa-icon>
          <span>Mover</span>
        </button>
      </div>

      <div class="tool-group">
        <span class="group-title">Mobiliario</span>
        <button (click)="agregarMueble('rect')" class="tool-btn">
          <fa-icon [icon]="['fas', 'square']"></fa-icon>
          <span>Cuadrada</span>
        </button>
        <button (click)="agregarMueble('circle')" class="tool-btn">
          <fa-icon [icon]="['fas', 'circle']"></fa-icon>
          <span>Redonda</span>
        </button>
      </div>

      <div class="spacer"></div>

      <div class="actions">
        <ion-button color="danger" fill="clear" (click)="limpiarLienzo()" title="Borrar Todo">
          <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
        </ion-button>
        <ion-button color="primary" (click)="guardar()">
          <ion-icon name="save-outline" slot="start"></ion-icon>
          Guardar
        </ion-button>
      </div>
    </div>

    <div class="canvas-container" #canvasContainer>
      <canvas id="fabric-canvas"></canvas>
      
      @if (modo() === 'pared') {
        <div class="help-toast">
          Click para iniciar ➜ Click para esquinas ➜ Click en inicio para cerrar.
        </div>
      }
    </div>

  </div>
</ion-content>